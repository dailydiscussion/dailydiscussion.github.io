<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Target NEET-PG | INICET 2024</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&family=Kalnia:wght@600&family=Lemon&family=Raleway:wght@700&family=Tilt+Prism&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="manifest.json">
    <link rel="mask-icon" href="favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#2b5797">
</head>

<body>
    <main class="main animated-element">
        <div class="home">
            <div class="header-box">
                <div class="col">
                    <div class="header">
                        <h2 id="greeting"></h2>
                        <h4 style="color: gray;">
                            "Ready to boost your NEET PG | INICET preparation together? Start quizzing now!"
                        </h4>
                    </div>
                </div>
                <div class="col-quiz">
                    <h3>
                        Today's Quiz
                    </h3>
                </div>
                <div class="col">
                    <h5 id="topicContainer" class="topic" style="color: gray;">
                        <!-- Content will be dynamically added here -->
                    </h5>
                </div>
                <div class="col" id="quizTitleContainer">
                    <a id="quizLink" href="#">
                        <button class="button">Start Quiz</button>
                    </a>
                </div>
            </div>
        </div>
        
        
        <div class="quiz">
            <div>
                <h3 style="margin: 0; margin-top: 40px;">
                    Dashboard
                </h3>
            </div>
            <div class="col">
                <div class="flex">
                    <div class="col-6-12">
                        <h2 id="totalDays"></h2>
                        <h6>
                            Day
                        </h6>
                    </div>
                    <div class="col-6-12">
                        <h2 id="totalQuestions"></h2>
                        <h6>
                            Questions discussed
                        </h6>
                    </div>
                    <div class="col-6-12">
                        <h2 id="totalTests"></h2>
                        <h6>
                            Tests Discussed
                        </h6>
                    </div>
                    <div class="col-6-12">
                        <h2>
                            1
                        </h2>
                        <h6>
                            Subjects Completed
                        </h6>
                    </div>
     
                </div>               
            </div>
        </div>

        <div>
            <h3 class="test-links">
                Tests Completed
            </h3>
        </div>

        <div id="tableContainer" class="tests"></div>
        
    </main>
    <footer class="footer">
        <p>
            Â© Copyright 2024 | All Rights Reserved
        </p>
    </footer>

    <script>
    // Get the current hour of the day
    var currentHour = new Date().getHours();

    // Function to determine the appropriate greeting based on the time
    function getGreeting() {
    var greeting = '';
    if (currentHour >= 5 && currentHour < 12) {
    greeting = 'Good Morning!';
    } else if (currentHour >= 12 && currentHour < 18) {
    greeting = 'Good Afternoon!';
    } else {
    greeting = 'Good Evening!';
    }
    return greeting;
    }

    // Display the greeting message
    document.getElementById('greeting').textContent = getGreeting();
    </script>

    <script>
    // Fetch the JSON data from the file using AJAX
    fetch('data.json')
    .then(response => response.json())
    .then(jsonData => {
    // Find the last entry by ID
    var lastEntry = jsonData.tests[0].links.find(link => link.id === "lastEntry");

    // Check if the last entry is found
    if (lastEntry) {
    // Update the HTML content with the last entry dynamically
    var quizLink = document.getElementById("quizLink");

    quizLink.href = lastEntry.url;
    // You can keep the existing button text if you don't want to change it
    // quizLink.querySelector("button").textContent = lastEntry.text;
    }

    // Assuming the "Topic - Surgery - Complete" is the last entry in the JSON
    var topicContainer = document.getElementById("topicContainer");
    topicContainer.textContent = jsonData.tests[0].links[jsonData.tests[0].links.length - 1].text;
    })
    .catch(error => console.error('Error fetching JSON:', error));
    </script>

    <script>
    fetch('data.json')
    .then(response => response.json())
    .then(jsonData => {
    const tableContainer = document.getElementById('tableContainer');
    const table = document.createElement('table');
    const thead = document.createElement('thead');
    const tbody = document.createElement('tbody');

    jsonData.tests.forEach(test => {
    const trHead = document.createElement('tr');
    const th = document.createElement('th');
    th.textContent = test.title;
    trHead.appendChild(th);
    thead.appendChild(trHead);

    test.links.forEach(link => {
    const trBody = document.createElement('tr');
    const td = document.createElement('td');
    const anchor = document.createElement('a');
    anchor.href = link.url;
    anchor.textContent = link.text;
    td.appendChild(anchor);
    trBody.appendChild(td);
    tbody.appendChild(trBody);
    });
    });

    table.appendChild(thead);
    table.appendChild(tbody);
    tableContainer.appendChild(table);
    })
    .catch(error => console.error('Error fetching data:', error));

    </script>

    <script>
    // Add the 'active' class to trigger the animation
    document.addEventListener('DOMContentLoaded', function () {
    document.querySelector('.animated-element').classList.add('active');
    });
    </script> 

    <script>
    // Function to calculate total number of questions
    function calculateTotalQuestions(testData) {
    let totalQuestions = 0;

    testData.tests[0].links.forEach(test => {
    const numberOfQuestions = parseInt(test.questions, 10);

    if (!isNaN(numberOfQuestions)) {
    totalQuestions += numberOfQuestions;
    } else {
    console.error(`Invalid or missing number of questions for test: ${test.text}`);
    }
    });

    return totalQuestions;
    }

    // Function to calculate total number of tests
    function calculateTotalTests(testData) {
    return testData.tests[0].links.length;
    }

    // Function to calculate total number of days
    function calculateTotalDays(testData) {
    let totalDays = 0;

    testData.tests[0].links.forEach(test => {
    const numberOfDays = parseInt(test.days, 10);

    if (!isNaN(numberOfDays)) {
    totalDays += numberOfDays;
    } else {
    console.error(`Invalid or missing number of days for test: ${test.text}`);
    }
    });

    return totalDays;
    }

    // Fetch JSON data from data.json
    fetch('data.json')
    .then(response => response.json())
    .then(data => {
    // Update HTML elements with calculated values
    document.getElementById('totalQuestions').innerText = calculateTotalQuestions(data);
    document.getElementById('totalTests').innerText = calculateTotalTests(data);
    document.getElementById('totalDays').innerText = calculateTotalDays(data);
    })
    .catch(error => console.error('Error fetching JSON:', error));
    </script>
      

</body>

</html>
